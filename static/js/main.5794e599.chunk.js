(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),i=n.n(c),o=(n(12),n(2)),s=n(0),u=function(e){var t=Object(a.useState)(Object(s.jsx)("div",{className:"board-square board-square-available",onClick:e.sendAttack})),n=Object(o.a)(t,2),r=n[0],c=n[1],i="";!0===e.ship&&(i="square-isShip");var u=["board-square board-square-available "+i,"board-square board-square-miss "+i,"board-square board-square-hit "],d="0"===e.player?u:["board-square board-square-available display-hover","board-square board-square-miss","board-square board-square-hit"];return Object(a.useEffect)((function(){"available"===e.type?c(Object(s.jsx)("div",{className:d[0],"data-index":e.index,onClick:e.sendAttack})):"miss"===e.type?c(Object(s.jsx)("div",{className:d[1]})):c(Object(s.jsx)("div",{className:d[2]}))}),[e]),r},d=function(e){var t=Object(a.useState)(e.hitBoard),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(e.gameBoard),d=Object(o.a)(i,2),l=d[0],f=d[1];Object(a.useEffect)((function(){c(e.hitBoard),f(e.gameBoard)}),[e]);var b=function(t){console.log(t.currentTarget.getAttribute("data-index")),e.sendAttack(t.currentTarget.getAttribute("data-index"),e.player)};return Object(s.jsx)("div",{className:"board",children:r.map((function(t,n){var a=!1;return-1!==l[n]&&(a=!0),-1===t?Object(s.jsx)(u,{active:"true",type:"available",index:n,sendAttack:b,player:e.player,ship:a},n):0===t?Object(s.jsx)(u,{active:"false",type:"miss",index:n,player:e.player,ship:a},n):Object(s.jsx)(u,{active:"false",type:"hit",index:n,player:e.player,ship:a},n)}))})},l=function(e){var t="0"===e.playerIndex?"You":"Computer",n=Object(a.useState)(e.opp.getBoard().checkAmountSunk()),r=Object(o.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(0),d=Object(o.a)(u,2),l=d[0],f=d[1],b=Object(a.useState)(0),h=Object(o.a)(b,2),j=h[0],v=h[1];return Object(a.useEffect)((function(){i(e.opp.getBoard().checkAmountSunk()),f(e.opp.getHitBoard().filter((function(e){return 0===Number(e)})).length),v(e.opp.getHitBoard().filter((function(e){return 1===Number(e)})).length)}),[e]),Object(s.jsxs)("div",{className:"score",children:[Object(s.jsxs)("h2",{children:[" ",Object(s.jsx)("span",{children:t})," "]}),Object(s.jsxs)("h3",{children:[" Missed: ",Object(s.jsx)("span",{children:l})," "]}),Object(s.jsxs)("h3",{children:[" Hit: ",Object(s.jsx)("span",{children:j})," "]}),Object(s.jsxs)("h3",{children:[" Sunk: ",Object(s.jsx)("span",{children:c})," "]})]})},f=n(4),b=function(e,t){var n=t.length,a=[],r=!1,c=function(){return a.length===n?(r=!0,console.log("Ship ".concat(e," has been sunken, so isSunk is:"),r)):r=!1,r};return{hit:function(e){return!(!t.includes(Number(e))||a.includes(Number(e)))&&(a.push(e),c(),!0)},sendLocationHits:function(){return a},checkIsSunk:c,getPosition:function(){return t}}},h=function(e,t){var n=!0;return(!0===function(e){for(var t=0;t<e.length;t++)if(0!==t){if(e[t]+1!==e[t-1]&&e[t]-1!==e[t-1])return!1;if(Math.floor(e[t]/10)!==Math.floor(e[t-1]/10))return!1}return!0}(e)||!0===function(e){for(var t=!0,n=0;n<e.length;n++)0!==n&&e[n]+10!==e[n-1]&&e[n]-10!==e[n-1]&&(t=!1);return t}(e))&&(e.forEach((function(e){(e<0||e>99)&&(n=!1)})),e.forEach((function(e){-1!==t[e]&&(n=!1)})),n)},j=function(e,t){for(var n=[e],a=1;a<t;a++){var r=10*a+e;n.push(r)}return n},v=function(e,t){for(var n=[-3,-2,-1];!0!==h(n,t);){var a=Math.floor(Math.random()*(100-10*(e-1)));n=j(a,e)}return n},O=function(e,t){for(var n=[e],a=1;a<t;a++){var r=e+a;n.push(r)}return n},p=function(e,t){for(var n=[-3,-2,-1];!0!==h(n,t);){var a=Math.floor(Math.random()*(100-e));n=O(a,e)}return n},g=function(){var e,t,n=!1,a=[],r=function(){e=new Array(100).fill(-1),t=new Array(100).fill(-1)},c=function(e,n){t[e]=n},i=function(){var e=!0;a.forEach((function(t){!0!==t.checkIsSunk()&&(e=!1)})),n=e};return r(),{createEmptyBoard:r,addShipToBoard:function(t){var n=a.length;if(h(t,e)){var r=b(n,t);a=[].concat(Object(f.a)(a),[r]),t.forEach((function(t){e[t]=n}))}return e},receiveAttack:function(n){var r=e[n];-1!==r?(a[r].hit(n),c(n,1)):c(n,0);return i(),t},getGameBoard:function(){return e},getAllSunk:function(){return n},getHitBoard:function(){return t},getAllShips:function(){return a},setHitBoard:function(e){t=e},setGameBoard:function(t){e=t},setShips:function(e){a=e},checkAmountSunk:function(){var e=0;return a.forEach((function(t){!0===t.checkIsSunk()&&(e+=1)})),e}}},m=function(e,t){var n=g(),a=t,r=function(e,t){return Math.floor(e[0]/10)!==Math.floor(t/10)||Math.floor(e[2]/10)!==Math.floor(t/10)?[e[1],e[3]]:e};return{getBoard:function(){return n},toggleTurn:function(){return!a},smartMove:function(e){for(var t=function(e){var t=[];return e.forEach((function(e,n){-1===e&&t.push(n)})),t}(e),n=function(e){var t=[];return e.forEach((function(e,n){1===e&&t.push(n)})),t}(e),a=0;a<n.length;a++)for(var c=n[a],i=[c-1,c-10,c+1,c+10],o=(i=r(i,c)).length,s=0;s<i.length;s++){var u=i[s];if(n.includes(u)&&t.includes(i[(s+o/2)%o]))return i[(s+2)%4]}for(var d=0;d<n.length;d++){var l=n[d],f=[l-1,l-10,l+1,l+10];f=r(f,l);for(var b=0;b<f.length;b++){var h=f[b];if(t.includes(h))return h}}return t[Math.floor(Math.random()*t.length)]},attackOpp:function(e,t){t.receiveAttack(e)},haveLost:function(){return n.getAllSunk()},addShip:function(e){n.addShipToBoard(e)},getHitBoard:function(){return n.getHitBoard()},receiveAttack:function(e){return n.receiveAttack(e)},setPlayer:function(e,t,a){n.setHitBoard(t),n.setGameBoard(e),n.setShips(a)}}},x=function(e){var t=Object(a.useState)(m(0,!0)),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(m(1,!1)),u=Object(o.a)(i,2),f=u[0],b=u[1],h=Object(a.useState)(new Array(100).fill(-1)),j=Object(o.a)(h,2),O=j[0],g=j[1],x=Object(a.useState)(new Array(100).fill(-1)),S=Object(o.a)(x,2),k=S[0],y=S[1],B=Object(a.useState)(0),A=Object(o.a)(B,2),E=A[0],N=A[1],M=Object(a.useState)(!1),q=Object(o.a)(M,2),C=q[0],H=q[1],P=Object(a.useState)(""),T=Object(o.a)(P,2),I=T[0],w=T[1];Object(a.useEffect)((function(){H(!1);var t=m(1,!1);if(function(e){var t=[],n=new Array(100).fill(-1);return e.forEach((function(e){var a;a=0===Math.floor(2*Math.random())?v(e,n):p(e,n),t.push(a),a.forEach((function(e){n[e]=1}))})),console.log("computer ship arrays: ",t),t}(e.shipSizes).forEach((function(e){t.addShip(e)})),b(t),e.playerShips){var n=m(0,!0);e.playerShips.forEach((function(e){n.addShip(e)})),c(n)}}),[e]);var z=function(e,t){if(String(E)!==t&&!0!==C){console.log("Attack on Player ".concat(t," at ").concat(e));var n="0"===t?r:f,a=m(t,!1);a.setPlayer(n.getBoard().getGameBoard(),n.getBoard().getHitBoard(),n.getBoard().getAllShips());var i=a.receiveAttack(Number(e));"0"===t?(c(a),g(i)):(b(a),y(i)),F()}},F=function(){N(0===E?1:0)};return Object(a.useEffect)((function(){var e=0===E?f:r;!0===e.haveLost()&&(console.log("Player ",e," has lost"),H(!0),w(0===E?"You":"Computer")),setTimeout((function(){if(1===E){var e=f.smartMove(O);z(e,"0")}}),200)}),[E]),Object(s.jsx)("div",{children:!1===C?Object(s.jsxs)("div",{className:"game",children:[Object(s.jsxs)("div",{className:"game-boards",children:[Object(s.jsx)(d,{hitBoard:O,sendAttack:z,player:"0",gameBoard:r.getBoard().getGameBoard()}),Object(s.jsx)(d,{hitBoard:k,sendAttack:z,player:"1",gameBoard:r.getBoard().getGameBoard()})]}),Object(s.jsxs)("div",{className:"game-scores",children:[Object(s.jsx)(l,{playerIndex:"0",opp:f}),Object(s.jsx)(l,{playerIndex:"1",opp:r})]})]}):Object(s.jsxs)("div",{className:"winner-banner",children:[Object(s.jsxs)("h1",{children:["The Winner Is ",Object(s.jsx)("span",{children:I})," "]}),Object(s.jsx)("button",{className:"button",onClick:function(){return e.finish()},children:"Play Again"})]})})},S=function(e){var t=Object(a.useState)(Object(s.jsx)("div",{className:"board-square"})),n=Object(o.a)(t,2),r=n[0],c=n[1],i=function(){e.sendEvent(e.index)},u=function(){e.sendClick(e.index)};return Object(a.useEffect)((function(){!0===e.active?c(Object(s.jsx)("div",{className:" board-square board-basic-square-active",onMouseOver:i,onClick:u})):c(Object(s.jsx)("div",{className:"board-square",onMouseOver:i}))}),[e]),r},k=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=(n[0],n[1],Object(a.useState)(0)),c=Object(o.a)(r,2),i=c[0],u=c[1],d=Object(a.useState)(e.shipSizes[i]),l=Object(o.a)(d,2),b=l[0],v=l[1],p=Object(a.useState)(!0),g=Object(o.a)(p,2),m=g[0],x=g[1],k=Object(a.useState)([]),y=Object(o.a)(k,2),B=y[0],A=y[1],E=Object(a.useState)(new Array(100).fill(-1)),N=Object(o.a)(E,2),M=N[0],q=N[1],C=function(e){var t,n=H();t=!0===m?O(e,b):j(e,b),h(t,n)?t.forEach((function(e){n[e]=0})):n.map((function(e){return 0===e?-1:e})),q(n)},H=function(){var e=Object(f.a)(M);return e=e.map((function(e){return 0===e?-1:e})),q(e),e},P=function(t){var n,a=H();if(n=!0===m?O(t,b):j(t,b),h(n,a)){n.forEach((function(e){a[e]=1}));var r=Object(f.a)(B);r.push(n),A(r),r.length===e.shipSizes.length&&e.finished(r),v(e.shipSizes[i+1]),u(i+1)}q(a)};return Object(s.jsxs)("div",{className:"choose-board",children:[Object(s.jsx)("div",{className:"board",children:M.map((function(e,t){return-1===e?Object(s.jsx)(S,{index:t,active:!1,sendEvent:C,sendClick:P},t):Object(s.jsx)(S,{index:t,active:!0,sendEvent:C,sendClick:P},t)}))}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"button",onClick:function(){return x(!m)},children:"Rotate Ship"})})]})};n(14);var y=function(){var e=[5,4,4,3,3,2,2,2],t=Object(a.useState)([]),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),d=u[0],l=u[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("div",{className:"title-div",children:Object(s.jsx)("h1",{children:"BATTLE-SHIP"})}),Object(s.jsx)("div",{children:!1===d?Object(s.jsx)(k,{shipSizes:e,finished:function(e){alert("Player Finished Choosing: ",e),console.log("Player Finished Choosing: ",e),c(e),l(!0)}}):Object(s.jsx)(x,{playerShips:r,shipSizes:e,finish:function(){l(!1)}})})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(y,{})}),document.getElementById("root")),B()}},[[15,1,2]]]);
//# sourceMappingURL=main.5794e599.chunk.js.map